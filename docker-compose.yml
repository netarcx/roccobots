services:
  ttwoouitomamout:
    # Use a descriptive container name
    container_name: "touitomamout"

    # The Docker image for the application    image: ghcr.io/yamada-sexta/touitomamout-next:latest
    build:
      context: ./  # ‚Üê This will build the image from the source code
    # This policy ensures the container restarts automatically if it stops
    restart: unless-stopped

    # Load all variables from the .env file in the same directory
    env_file: ".env"

    # You can also set specific environment variables here
    environment:
      - DATABASE_PATH=/data/data.sqlite

    # Mount a local directory to persist data (like the database)
    # This ensures your post history isn't lost when the container is updated
    volumes:
      - ./data:/data

    # DNS servers to help with network connectivity issues on Linux
    # Uncomment if experiencing WebSocket connection issues
    dns:
      - 8.8.8.8
      - 8.8.4.4

    # Uncomment the following line if you're experiencing WebSocket connection issues
    # on Linux. This uses the host's network stack directly.
    # WARNING: This may have security implications
    # network_mode: "host"
